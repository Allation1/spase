<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8"> <!-- Встановлює кодування UTF-8 для підтримки української мови -->
  <title>Звіт БпАК</title> <!-- Заголовок вкладки браузера -->
  <style>
    .container {
      display: flex; /* Розташовує колонки горизонтально */
      gap: 24px; /* Відступ між колонками */
      padding: 16px; /* Внутрішній відступ контейнера */
      font-family: Arial, sans-serif; /* Шрифт для всього інтерфейсу */
    }
    .left-column {
      flex: 1; /* Займає доступне місце */
      min-width: 280px; /* Мінімальна ширина лівої колонки */
    }
    #sharedInput, #commentInput {
      width: 100%; /* Поля на всю ширину колонки */
      padding: 8px; /* Внутрішній відступ полів */
      font-size: 14px; /* Розмір шрифту */
      margin-bottom: 12px; /* Відступ знизу */
      border: 1px solid #ccc; /* Сіра рамка */
      border-radius: 4px; /* Заокруглені кути */
    }
    #commentInput {
      margin-bottom: 16px; /* Трохи більший відступ для коментаря */
    }
    .target-btn {
      display: flex; /* Горизонтальне розташування іконки та тексту */
      align-items: center; /* Вирівнювання по вертикалі */
      gap: 6px; /* Проміжок між іконкою та текстом */
      padding: 6px 12px; /* Внутрішній відступ кнопки */
      font-size: 14px; /* Розмір шрифту */
      cursor: pointer; /* Курсор "рука" при наведенні */
      background: #f0f0f0; /* Світло-сірий фон */
      border: 1px solid #ccc; /* Рамка */
      border-radius: 4px; /* Заокруглені кути */
      margin-bottom: 6px; /* Відступ знизу */
      width: 100%; /* Ширина на всю колонку */
    }
    .target-btn svg {
      width: 18px; /* Ширина іконки */
      height: 18px; /* Висота іконки */
      fill: #333; /* Колір іконки */
    }
    .right-column {
      flex: 1; /* Займає доступне місце */
      min-width: 320px; /* Мінімальна ширина правої колонки */
      background-color: #f9f9f9; /* Світлий фон звіту */
      padding: 16px; /* Внутрішній відступ */
      border: 1px solid #ddd; /* Легка рамка */
      border-radius: 6px; /* Заокруглені кути */
      font-size: 14px; /* Розмір шрифту */
      line-height: 1.4; /* Міжрядковий інтервал */
      position: relative; /* Для позиціонування кнопок "Скинути" та "Копіювати" */
    }
    .report-line {
      margin-bottom: 4px; /* Невеликий відступ між рядками звіту */
    }
    .counter-value {
      font-weight: bold; /* Жирний шрифт для лічильників */
      color: #0066cc; /* Синій колір для чисел */
    }
    #reportDate {
      margin-bottom: 12px; /* Відступ під датою */
      font-weight: bold; /* Жирний шрифт для дати */
    }
    #previewTemplate {
      margin-top: 20px; /* Відступ зверху перед блоком шаблону */
      padding: 12px; /* Внутрішній відступ */
      background: #f0f8ff; /* Дуже світло-блакитний фон */
      border: 1px solid #ccc; /* Рамка */
      border-radius: 6px; /* Заокруглені кути */
      font-family: monospace; /* Моноширинний шрифт для читабельності шаблону */
      white-space: pre-wrap; /* Зберігає пробіли та переноси */
      font-size: 13px; /* Невеликий розмір шрифту */
      min-height: 80px; /* Мінімальна висота блоку */
      color: #333; /* Темний колір тексту */
    }
  </style>
</head>
<body>

  <div class="container">
    <div class="left-column">
      <input type="text" id="sharedInput" placeholder="Координати (обов'язково)"> <!-- Поле для координат -->
      <input type="text" id="commentInput" placeholder="Дод. коментарі (необов'язково)"> <!-- Поле для коментаря -->

      <!-- Гармата -->
      <button class="target-btn" data-type="Гармата">
        <svg viewBox="0 0 24 24"><path d="M4 10h3l2-2h5l2 2h3v2h-3l-2 2h-5l-2-2H4v-2zm2 2h12v2H6v-2z"/></svg>
        Гармата
      </button>

      <!-- ОС (Очна Спостережна точка) -->
      <button class="target-btn" data-type="ОС">
        <svg viewBox="0 0 24 24"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
        ОС
      </button>

      <!-- Укриття -->
      <button class="target-btn" data-type="Укриття">
        <svg viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>
        Укриття
      </button>

      <!-- Корегування -->
      <button class="target-btn" data-type="Корегування">
        <svg viewBox="0 0 24 24"><path d="M12 2C8.14 2 5 5.14 5 9c0 5.3 7 13 7 13s7-7.7 7-13c0-3.86-3.14-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>
        Корегування
      </button>

      <!-- Дорозвідка гармати -->
      <button class="target-btn" data-type="Дорозвідка гармати">
        <svg viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
        Дорозвідка гармати
      </button>

      <!-- Фіксація ураження гармати -->
      <button class="target-btn" data-type="Фіксація ураження гармати">
        <svg viewBox="0 0 24 24"><path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
        Фіксація ураження гармати
      </button>

      <!-- Фіксація ураження укриття -->
      <button class="target-btn" data-type="Фіксація ураження укриття">
        <svg viewBox="0 0 24 24">
          <!-- Будівля -->
          <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z" fill="none" stroke="#333" stroke-width="2"/>
          <!-- Галочка -->
          <path d="M9 12l2 2 4-4" fill="none" stroke="#333" stroke-width="2"/>
        </svg>
        Фіксація ураження укриття
      </button>

      <!-- ЛАТ (Легковий авто) -->
      <button class="target-btn" data-type="ЛАТ">
        <svg viewBox="0 0 24 24"><path d="M18 8c0-2.21-1.79-4-4-4s-4 1.79-4 4 1.79 4 4 4 4-1.79 4-4zm-4 10c-1.1 0-2-.9-2-2h4c0 1.1-.9 2-2 2zm-8-2h2v-4H4c0 2.21 1.79 4 4 4zm14 0h2c0-2.21-1.79-4-4-4h-2v4z"/></svg>
        ЛАТ
      </button>

      <!-- ВАТ (Вантажний авто) -->
      <button class="target-btn" data-type="ВАТ">
        <svg viewBox="0 0 24 24"><path d="M20 8h-3V5c0-.55-.45-1-1-1s-1 .45-1 1v3h-2V5c0-.55-.45-1-1-1s-1 .45-1 1v3H8V5c0-.55-.45-1-1-1s-1 .45-1 1v3H4c-1.1 0-2 .9-2 2v7c0 1.1.9 2 2 2h2v3c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2v-3h2c1.1 0 2-.9 2-2v-7c0-1.1-.9-2-2-2zm-8 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>
        ВАТ
      </button>

      <!-- Антенна -->
      <button class="target-btn" data-type="Антенна">
        <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8 0-1.82.62-3.51 1.64-4.86L12 14.64l6.36-7.5C19.38 8.49 20 10.18 20 12c0 4.41-3.59 8-8 8z"/></svg>
        Антенна
      </button>

      <!-- БпЛА -->
      <button class="target-btn" data-type="БпЛА">
        <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8 0-1.82.62-3.51 1.64-4.86L12 14.64l6.36-7.5C19.38 8.49 20 10.18 20 12c0 4.41-3.59 8-8 8z"/></svg>
        БпЛА
      </button>

      <!-- Демаскуючі ознаки (накат) -->
      <button class="target-btn" data-type="Демаскуючі ознаки (накат)">
        <svg viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
        Демаскуючі ознаки (накат)
      </button>

      <!-- Склад -->
      <button class="target-btn" data-type="Склад">
        <svg viewBox="0 0 24 24"><path d="M20 6h-3V4c0-1.1-.9-2-2-2H9c-1.1 0-2 .9-2 2v2H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-8 2c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z"/></svg>
        Склад
      </button>

      <div id="previewTemplate">Натисніть кнопку, щоб побачити шаблон</div> <!-- Блок для попереднього перегляду шаблону -->
    </div>

    <!-- Права колонка (звіт) -->
    <div class="right-column" id="reportContainer">
      <button id="resetBtn" style="position:absolute;top:12px;right:100px;padding:4px 8px;font-size:12px;background:#ff6666;color:white;border:none;border-radius:4px;cursor:pointer;">Скинути</button> <!-- Кнопка скидання лічильників -->
      <button id="copyReportBtn" style="position:absolute;top:12px;right:12px;padding:4px 8px;font-size:12px;background:#4CAF50;color:white;border:none;border-radius:4px;cursor:pointer;">Копіювати</button> <!-- Кнопка копіювання звіту -->
      <div id="reportDate" class="report-line"></div> <!-- Дата звіту (автоматично) -->
      <div class="report-line">1. Екіпаж М361 (БпАК Shark-M)</div> <!-- Фіксований рядок -->
      <div class="report-line">2. Зона інтересів - Успенівка</div> <!-- Фіксований рядок -->
      <div class="report-line">3. Результат:</div> <!-- Початок результатів -->
      <div class="report-line">Бойових вильотів - </div> <!-- Порожній рядок для заповнення -->
      <div class="report-line">Цілі - </div> <!-- Порожній рядок для заповнення -->
      <div class="report-line">Гармата-<span id="counter-Гармата" class="counter-value">0</span></div> <!-- Лічильник для "Гармата" -->
      <div class="report-line">Ос-<span id="counter-ОС" class="counter-value">0</span></div> <!-- Лічильник для "ОС" -->
      <div class="report-line">Укриття-<span id="counter-Укриття" class="counter-value">0</span></div> <!-- Лічильник для "Укриття" -->
      <div class="report-line">Корегування-<span id="counter-Корегування" class="counter-value">0</span></div> <!-- Лічильник для "Корегування" -->
      <div class="report-line">Дорозвідка гармати-<span id="counter-Дорозвідка гармати" class="counter-value">0</span></div> <!-- Лічильник для "Дорозвідка гармати" -->
      <div class="report-line">Фіксація ураження гармати-<span id="counter-Фіксація ураження гармати" class="counter-value">0</span></div> <!-- Лічильник для "Фіксація ураження гармати" -->
      <div class="report-line">Фіксація ураження укриття-<span id="counter-Фіксація ураження укриття" class="counter-value">0</span></div> <!-- Лічильник для "Фіксація ураження укриття" -->
      <div class="report-line">ЛАТ-<span id="counter-ЛАТ" class="counter-value">0</span></div> <!-- Лічильник для "ЛАТ" -->
      <div class="report-line">ВАТ-<span id="counter-ВАТ" class="counter-value">0</span></div> <!-- Лічильник для "ВАТ" -->
      <div class="report-line">Антенна-<span id="counter-Антенна" class="counter-value">0</span></div> <!-- Лічильник для "Антенна" -->
      <div class="report-line">БпЛА-<span id="counter-БпЛА" class="counter-value">0</span></div> <!-- Лічильник для нового типу "БпЛА" (без "-1") -->
      <div class="report-line">Демаскуючі ознаки (накат)-<span id="counter-Демаскуючі ознаки (накат)" class="counter-value">0</span></div> <!-- Лічильник для нового типу "Демаскуючі ознаки (накат)" (без "-1") -->
      <div class="report-line">Склад-<span id="counter-Склад" class="counter-value">0</span></div> <!-- Лічильник для нового типу "Склад" -->
      <div class="report-line">4. Втрати ос відсутні.</div> <!-- Фіксований рядок -->
      <div class="report-line">Втрати/пошкодження бортів/обладнання відсутні.</div> <!-- Фіксований рядок -->
      <div class="report-line">Автомобіль справний.</div> <!-- Фіксований рядок -->
      <div class="report-line">5. все добре</div> <!-- Фіксований рядок -->
    </div>
  </div>

  <!-- Скрипт -->
  <script>
    // Список усіх типів цілей, тепер без "-1" у нових записах
    const allTypes = [
      'Гармата',
      'ОС',
      'Укриття',
      'Корегування',
      'Дорозвідка гармати',
      'Фіксація ураження гармати',
      'Фіксація ураження укриття',
      'ЛАТ',
      'ВАТ',
      'Антенна',
      'БпЛА', // ← оновлено: прибрано "-1"
      'Демаскуючі ознаки (накат)', // ← оновлено: прибрано "-1"
      'Склад' // ← додано новий тип
    ];

    // Завантажує лічильники з localStorage або створює нові
    function loadCounters() {
      const saved = localStorage.getItem('counters'); // Отримує збережені дані
      let counters = {};
      if (saved) {
        try { counters = JSON.parse(saved); } catch (e) {} // Безпечний парсинг
      }
      allTypes.forEach(type => {
        if (counters[type] === undefined) counters[type] = 0; // Ініціалізує 0, якщо немає
      });
      return counters;
    }

    // Зберігає лічильники в localStorage
    function saveCounters(counters) {
      localStorage.setItem('counters', JSON.stringify(counters)); // Перетворює в JSON і зберігає
    }

    // Оновлює відображення лічильників на екрані
    function updateUI(counters) {
      allTypes.forEach(type => {
        const el = document.getElementById(`counter-${type}`); // Знаходить span за id
        if (el) el.textContent = counters[type]; // Оновлює число
      });
    }

    // Ініціалізація
    let counters = loadCounters(); // Завантажує лічильники
    const now = new Date(); // Поточна дата
    const day = String(now.getDate()).padStart(2, '0'); // Форматує день (01, 02...)
    const month = String(now.getMonth() + 1).padStart(2, '0'); // Форматує місяць (01–12)
    const year = now.getFullYear(); // Рік
    document.getElementById('reportDate').textContent = `${day}.${month}.${year}`; // Встановлює дату
    updateUI(counters); // Оновлює UI

    // Генерує шаблон повідомлення, копіює його в буфер обміну
    function generateAndCopyTemplate(targetType) {
      const coords = document.getElementById('sharedInput').value.trim(); // Координати
      if (!coords) {
        document.getElementById('previewTemplate').textContent = 'Введіть координати'; // Помилка, якщо нема координат
        return;
      }
      const comment = document.getElementById('commentInput').value.trim(); // Коментар
      counters[targetType] = (counters[targetType] || 0) + 1; // Збільшує лічильник
      updateUI(counters); // Оновлює UI
      saveCounters(counters); // Зберігає
      const now = new Date();
      const dt = `${String(now.getDate()).padStart(2,'0')}.${String(now.getMonth()+1).padStart(2,'0')}.${now.getFullYear()} ${String(now.getHours()).padStart(2,'0')}:${String(now.getMinutes()).padStart(2,'0')}`; // Дата/час виявлення
      const template =
`Дата/час виявлення: ${dt}
Координати: ${coords}
Засіб: SHARK-M
Екіпаж: M361
№ вильоту: 1
Ціль: ${targetType}
Результат: Виявлено
Дод.коментарі: ${comment}`;
      document.getElementById('previewTemplate').textContent = template; // Показує шаблон
      navigator.clipboard.writeText(template); // Копіює в буфер
    }

    // Додає обробник кліку до кожної кнопки цілі
    document.querySelectorAll('.target-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        generateAndCopyTemplate(btn.getAttribute('data-type')); // Викликає генерацію з типом кнопки
      });
    });

    // Обробник кнопки "Скинути"
    document.getElementById('resetBtn').addEventListener('click', () => {
      allTypes.forEach(type => counters[type] = 0); // Обнуляє всі лічильники
      updateUI(counters); // Оновлює UI
      localStorage.removeItem('counters'); // Видаляє з localStorage
      document.getElementById('previewTemplate').textContent = 'Натисніть кнопку, щоб побачити шаблон'; // Скидає шаблон
    });

    // Обробник кнопки "Копіювати звіт"
    document.getElementById('copyReportBtn').addEventListener('click', () => {
      const dateLine = document.getElementById('reportDate').textContent; // Дата
      const staticLines = [
        '1. Екіпаж М361 (БпАК Shark-M)',
        '2. Зона інтересів - Успенівка',
        '3. Результат:',
        'Бойових вильотів - ',
        'Цілі - '
      ];
      // Мапінг для відображення в звіті (ОС → Ос тощо)
      const mapping = {
        'Гармата': 'Гармата',
        'ОС': 'Ос',
        'Укриття': 'Укриття',
        'Корегування': 'Корегування',
        'Дорозвідка гармати': 'Дорозвідка гармати',
        'Фіксація ураження гармати': 'Фіксація ураження гармати',
        'Фіксація ураження укриття': 'Фіксація ураження укриття',
        'ЛАТ': 'ЛАТ',
        'ВАТ': 'ВАТ',
        'Антенна': 'Антенна',
        'БпЛА': 'БпЛА', // ← оновлено: без "-1"
        'Демаскуючі ознаки (накат)': 'Демаскуючі ознаки (накат)', // ← оновлено: без "-1"
        'Склад': 'Склад' // ← додано мапінг для нового типу
      };
      // Формує динамічні рядки лише для ненульових лічильників
      const dynamicLines = allTypes
        .filter(type => counters[type] > 0)
        .map(type => `${mapping[type]}-${counters[type]}`);
      const footerLines = [
        '4. Втрати ос відсутні.',
        'Втрати/пошкодження бортів/обладнання відсутні.',
        'Автомобіль справний.',
        '5. все добре'
      ];
      const fullReport = [dateLine, ...staticLines, ...dynamicLines, ...footerLines].join('\n'); // Збирає весь звіт
      navigator.clipboard.writeText(fullReport).then(() => { // Копіює
        const btn = document.getElementById('copyReportBtn');
        const orig = btn.textContent;
        btn.textContent = 'Скопійовано!'; // Тимчасовий текст
        setTimeout(() => btn.textContent = orig, 800); // Повертає через 0.8 сек
      });
    });
  </script>
</body>
</html>